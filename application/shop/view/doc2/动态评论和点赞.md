# 动态评论和点赞


## 动态评论列表
~~~
/api/updates_comment/index
~~~
~~~
GET
~~~


功能：显示某一篇动态的评论列表，是分页的。  
注意：此接口也用于显示回复列表。
 

| 请求参数字段        | 请求参数含义  |
| -------- |:------|
|uid  |  用户id|
|id  | 主键id,但如果请求的是回复列表，则id表示评论的主键id |
|startid  | 起始序号，从0开始 |
|length  | 长度，默认10 |
|is_reply  | 20180117添加，默认0查评论列表，1表示查回复列表 |



|返回字段型 |类型 | 含义 |
| -------- |:------|:------|
|   is_bottom   | int | 1到底，0有下页  |
|  list   | array | 数组，每个元素是一个评论  |
|  parent   | object | 仅查回复列表时有，表示评论的详情。  比较巧，对象字段与上面的list的单个元素一致，所以下面不列  |


|list每行 |类型 | 含义 |
| -------- |:------|:------|
|   id   | int | 评论或回复的主键id  |
|   vip   | int | 无用  |
|   permissions   | int | 无用  |
|   score   | int | 无用  |
|   uid   | int | 用户id  |
|   nickname   | string | 用户昵称  |
|   pic   | string | 用户头像  |
|   like_count   | int | 该评论或回复的点赞数  |
|   is_like   | bool | 当前用户是否赞过此评论或回复  |
|   reply_count   | int | 对于评论，该评论的回复数量，对于回复无用  |
|   reply_time   | string | 时间戳，秒，对于评论，该评论的最新回复时间，对于回复无用。如果不存在返回null  |
|   time   | string | 该评论或回复的创建时间，秒  |
|   content   | string | 内容  |
|   age   | int | 年龄  |
|   sex   | int | 1男0女  |

 
## 动态发布评论或回复
~~~
/api/updates_comment/add
~~~
~~~
POST
~~~


功能：用户对某一条动态，发表自己的评论  
功能：注意，应该使用post提交表单，不用get  
功能：也可以对评论发表回复，此接口是复用的。
功能：发表后，服务端会修改数据库，改动态或评论 的评论条数以及最新回复时间字段。

| 请求参数字段        | 请求参数含义  |
| -------- |:------|
|uid  |  用户id|
|token  |  用户token，20180125加|
|id  | is_reply=0表示主键id， is_reply=1表示评论id  |
|content  | 评论内容，可以包括表情符 |
|is_reply  | 默认0是添加评论，1表示添加回复 |

|返回字段型 |类型 | 含义 |
| -------- |:------|:------|
|   无   |  |   |

## 动态点赞，评论点赞，回复点赞。
~~~
/api/updates_like/add
~~~
~~~
POST
~~~

功能：对动态或评论或者回复，点赞或取消
 

| 请求参数字段        | 请求参数含义  |
| -------- |:------|
|uid  |  用户id|
|token  |  用户token|
|id  |动态id， 评论id，或回复id |
|type  | 必传此字段，1动态，2评论，3回复 |


|返回字段型 |类型 | 含义 |
| -------- |:------|:------|
|   无   |  |   |


 


